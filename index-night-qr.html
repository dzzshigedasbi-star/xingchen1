<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>æ™¨æ¬£æƒ…è¶£è‡ªåŠ¨å”®è´§ Â· å¤œåº—é£ç‰ˆ</title>
<meta name="theme-color" content="#ff4081" />
<style>
  :root{
    --pink:#ff4081;
    --pink-light:#ff7bab;
    --bg-dark:#0f0f10;
    --card:#1e1e1e;
    --text:#f1f1f1;
    --sub:#c7c7c7;
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    color:var(--text);
    background: radial-gradient(1200px 600px at 10% -10%, rgba(255,64,129,.18), transparent 60%),
                radial-gradient(1000px 500px at 100% 10%, rgba(255,200,0,.12), transparent 60%),
                radial-gradient(800px 400px at 50% 120%, rgba(255,64,129,.15), transparent 60%),
                #0f0f10;
    background-attachment: fixed;
  }
  .appbar{
    position:sticky;top:0;z-index:20;
    backdrop-filter: saturate(140%) blur(8px);
    background: rgba(18,18,18,.55);
    border-bottom: 1px solid rgba(255,64,129,.25);
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 18px;
  }
  .title{font-weight:700;font-size:18px;color:var(--pink-light);text-shadow:0 0 8px rgba(255,64,129,.6);}
  .cart-pill{
    display:flex;align-items:center;gap:6px;
    background:rgba(255,64,129,.14);
    border:1px solid rgba(255,64,129,.4);
    border-radius:999px;padding:6px 12px;
    font-size:14px;color:var(--pink);
  }
  .badge{min-width:18px;height:18px;border-radius:9px;background:var(--pink);color:#fff;display:inline-flex;align-items:center;justify-content:center;font-size:12px;padding:0 6px;}

  .hero{margin:14px 16px;border-radius:14px;padding:18px;background:rgba(18,18,18,.55);backdrop-filter: blur(6px);
    border:1px solid rgba(255,64,129,.18);box-shadow:0 0 30px rgba(255,64,129,.18);}
  .hero h2{margin:0;color:var(--pink-light);font-size:20px}
  .hero p{margin:6px 0 0;color:var(--sub)}

  .grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;margin:18px 16px 100px;}
  .card{background:rgba(30,30,30,.7);backdrop-filter: blur(4px);
    border:1px solid rgba(255,64,129,.18);border-radius:14px;padding:12px;
    box-shadow:0 10px 28px rgba(255,64,129,.22);
    display:flex;flex-direction:column;gap:8px;transition:transform .2s ease, box-shadow .2s ease;}
  .card:hover{transform:translateY(-4px);box-shadow:0 14px 34px rgba(255,64,129,.34);}
  .thumb{width:100%;aspect-ratio:1/1;border-radius:10px;object-fit:cover;}
  .name{font-size:15px;font-weight:600;}
  .meta{display:flex;align-items:center;justify-content:space-between;}
  .price{color:var(--pink);font-weight:700;font-size:16px;}
  .btn{border:none;border-radius:8px;padding:8px 12px;background:var(--pink);color:#fff;font-weight:600;font-size:14px;box-shadow:0 6px 14px rgba(255,64,129,.25);}

  .dock{position:fixed;left:0;right:0;bottom:0;z-index:30;background:rgba(18,18,18,.6);
    backdrop-filter: blur(6px);padding:12px 16px;display:flex;gap:10px;border-top:1px solid rgba(255,64,129,.25);}
  .dock .ghost{flex:1;background:rgba(255,64,129,.14);border:1px solid rgba(255,64,129,.4);color:var(--pink);}
  .dock .solid{flex:2;background:var(--pink);color:#fff;}

  .sheet{position:fixed;left:0;right:0;bottom:-100%;z-index:40;background:rgba(28,28,28,.96);
    border-top-left-radius:18px;border-top-right-radius:18px;
    box-shadow:0 -10px 30px rgba(0,0,0,.6);transition:bottom .25s ease;}
  .sheet.show{bottom:0}
  .sheet .handle{width:50px;height:5px;border-radius:3px;background:#333;margin:10px auto;}
  .sheet .wrap{padding:10px 16px 20px;max-height:70vh;overflow:auto;}

  .cart-row{display:grid;grid-template-columns:44px 1fr auto;gap:10px;align-items:center;padding:10px 0;border-bottom:1px dashed rgba(255,64,129,.3);}
  .cart-thumb{width:44px;height:44px;border-radius:8px;object-fit:cover;}
  .qty{display:inline-flex;align-items:center;border:1px solid rgba(255,64,129,.4);border-radius:999px;overflow:hidden;}
  .qty button{background:transparent;border:none;width:28px;height:28px;font-size:18px;color:var(--pink);}
  .qty span{width:32px;text-align:center;}
  .del{border:none;background:transparent;color:#bbb;font-size:18px}
  .total{display:flex;align-items:center;justify-content:space-between;margin-top:10px;font-weight:700;}

  .pay-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px;}
  .pay-btn{border:1px solid rgba(255,64,129,.4);background:#2a2a2a;border-radius:12px;padding:12px;text-align:center;color:#fff;}
  .pay-btn.active{border-color:var(--pink);box-shadow:0 0 0 3px rgba(255,64,129,.25);}
  .code{margin-top:12px;display:flex;flex-direction:column;align-items:center;gap:6px;}
  .code img{width:200px;height:200px;border-radius:12px;object-fit:cover;box-shadow:0 0 24px rgba(255,64,129,.45);opacity:0;transform:translateY(6px);animation:qrin .28s forwards;}
  @keyframes qrin{to{opacity:1;transform:translateY(0)}}
  .muted{color:#ddd;font-size:13px;}

  .toast{position:fixed;left:50%;bottom:100px;transform:translateX(-50%) translateY(20px);
    background:rgba(255,64,129,.9);color:#fff;padding:10px 16px;border-radius:999px;font-size:13px;opacity:0;transition:all .25s ease;z-index:50;}
  .toast.show{opacity:1;transform:translateX(-50%) translateY(0);}

  .success-overlay{position:fixed;inset:0;background:rgba(0,0,0,.82);display:none;align-items:center;justify-content:center;flex-direction:column;color:#fff;z-index:60;}
  .heart{font-size:64px;color:var(--pink);animation:beat 1s infinite;}
  @keyframes beat{0%,100%{transform:scale(1)}50%{transform:scale(1.25)}}

  /* åº•éƒ¨å•†åŸå…¥å£äºŒç»´ç åŒº */
  .qr-cta{margin:30px 16px 120px;border-radius:16px;padding:14px 16px;text-align:center;
    background: rgba(18,18,18,.6);backdrop-filter: blur(8px);
    border:1px solid rgba(255,64,129,.25);box-shadow:0 6px 28px rgba(255,64,129,.18);}
  .qr-cta h3{margin:6px 0 10px;color:var(--pink-light);font-size:16px;}
  .qr-cta img{width:180px;height:180px;border-radius:12px;box-shadow:0 0 24px rgba(255,64,129,.35);}
  .qr-cta p{color:#cfcfcf;font-size:12px;margin-top:8px;}
</style>
</head>
<body>
  <div class="appbar">
    <div class="title">æ™¨æ¬£æƒ…è¶£è‡ªåŠ¨å”®è´§</div>
    <div class="cart-pill" onclick="openCart()">ğŸ›’ è´­ç‰©è½¦ <span class="badge" id="cartCount">0</span></div>
  </div>

  <section class="hero">
    <h2>å¤œè‰²æ’©äºº Â· å³åˆ»ç§äº«</h2>
    <p>åŒ¿åä¸‹å• Â· æé€Ÿå–è´§ Â· æ”¯æŒå¾®ä¿¡/æ”¯ä»˜å®æ”¯ä»˜</p>
  </section>

  <section class="grid" id="grid"></section>

  <div class="qr-cta">
    <h3>ğŸ“± æ‰«ç è¿›å…¥å•†åŸ</h3>
    <img alt="å•†åŸå…¥å£äºŒç»´ç " src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https%3A%2F%2Fchengxing.vercel.app%2F">
    <p>å°†æ­¤äºŒç»´ç æ‰“å°è´´åœ¨æœºèº«æˆ–é—¨å£ï¼Œé¡¾å®¢æ‰«ç ç›´è¾¾å•†åŸ</p>
  </div>

  <div class="dock">
    <button class="btn ghost" onclick="clearCart()">æ¸…ç©º</button>
    <button class="btn solid" onclick="openCart()">å»ç»“ç®—</button>
  </div>

  <div class="sheet" id="sheetCart"><div class="handle"></div><div class="wrap" id="cartWrap"></div></div>
  <div class="sheet" id="sheetPay"><div class="handle"></div><div class="wrap" id="payWrap"></div></div>

  <div class="success-overlay" id="successOverlay">
    <div class="heart">â¤ï¸</div>
    <div style="margin-top:10px;">æ„Ÿè°¢æ‚¨çš„è´­ä¹° â¤ï¸ æ”¯ä»˜æˆåŠŸï¼Œç¥æ‚¨ç”Ÿæ´»æ„‰å¿«ï½</div>
  </div>

  <div class="toast" id="toast">å·²åŠ å…¥è´­ç‰©è½¦</div>

<script>
const PRODUCTS=[
{id:1,name:"æœè•¾æ–¯ Air ç¤¼ç›’è£…",price:23,img:"https://i.postimg.cc/fTsKm6r2/f05e13db3e558fba89ac0c7984ab4f80.jpg"},
{id:2,name:"å†ˆæœ¬ 003 å¥¢åç³»åˆ—",price:35,img:"https://i.postimg.cc/3NTgjvnB/15ace1f0af2ea0b6afd41730f8c37a17.jpg"},
{id:3,name:"æƒ…è¶£æ¶¦æ»‘æ²¹ æ¸©æ„Ÿå‹",price:38,img:"https://i.postimg.cc/bwJ1R8HR/a9f87d22a51e18966d94b56127473053.jpg"},
{id:4,name:"é¦™æ°›æŒ‰æ‘©æ²¹",price:45,img:"https://i.postimg.cc/KzXLFTXq/074dbfd6c9e7c91dff6e1e63e975bf37.jpg"},
{id:5,name:"æƒ…è¶£å†…è¡£å¥—è£…",price:12.9,img:"https://i.postimg.cc/DfPskmxM/0ccdaeb3e347b84d8e063a17cd565b03.jpg"},
{id:6,name:"æ— çº¿è·³è›‹",price:48,img:"https://i.postimg.cc/zG6HShfB/d3c0043b379ca2d6b3204dae11961fa0.jpg"},
{id:7,name:"æ™ºèƒ½éœ‡åŠ¨æ£’ é«˜ç«¯æ¬¾",price:78,img:"https://i.postimg.cc/0Qd6sH0b/b105677d4fff37995f4bb35a6cfc49a5.jpg"},
{id:8,name:"ç”·æ€§å»¶æ—¶å–·å‰‚",price:14.9,img:"https://i.postimg.cc/kX520s6M/b69529996da94c770241110998d0ee0a.jpg"},
{id:9,name:"æ¶¦æ»‘å¥—è£…ç¤¼ç›’",price:68,img:"https://i.postimg.cc/0QxQc01x/bc5eaddae025ce0bc9f2d162796ebe75.jpg"},
{id:10,name:"æˆäººç©å…·ç›²ç›’",price:99,img:"https://i.postimg.cc/XqYv0NvQ/9e573c1b69758b1ac27378db634cc172.jpg"},
{id:11,name:"åŒäººæƒ…ä¾£å¥—è£…ç¤¼ç›’",price:108,img:"https://i.postimg.cc/Bb7nZWL2/2127f69ed62d4a61cdd44a833a9ebcaa.jpg"},
{id:12,name:"å¥³ç”¨éœ‡åŠ¨æŒ‰æ‘©æ£’ å¥¢åæ¬¾",price:99,img:"https://i.postimg.cc/TYhP7PFp/9e61bc72aad7076c6da597e17661ee18.jpg"}
];
const WECHAT_QR="https://i.postimg.cc/3NjJpycp/20251018171859-1-4.jpg";
const ALIPAY_QR="https://i.postimg.cc/9X9PvRCL/20251017181045-13-2.jpg";

const grid=document.getElementById('grid');
PRODUCTS.forEach(p=>{
  const el=document.createElement('div');
  el.className='card';
  el.innerHTML=`<img class="thumb" src="${p.img}" alt="${p.name}">
    <div class="name">${p.name}</div>
    <div class="meta"><div class="price">Â¥${p.price}</div>
      <button class="btn" onclick="add(${p.id})">åŠ å…¥</button></div>`;
  grid.appendChild(el);
});

let cart=[];
const toast=(txt="å·²åŠ å…¥è´­ç‰©è½¦")=>{
  const t=document.getElementById('toast');
  t.textContent=txt;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),1200);
};
function add(id){
  const p=PRODUCTS.find(x=>x.id===id);
  const i=cart.find(x=>x.id===id);
  if(i) i.qty++; else cart.push({...p,qty:1});
  updateBadge(); toast(`${p.name} å·²åŠ å…¥`);
}
function updateBadge(){
  const c=cart.reduce((s,i)=>s+i.qty,0);
  document.getElementById('cartCount').textContent=c;
}
function clearCart(){ cart=[]; updateBadge(); toast("è´­ç‰©è½¦å·²æ¸…ç©º"); }

const sheetCart=document.getElementById('sheetCart');
function openCart(){ renderCart(); sheetCart.classList.add('show'); }
function closeCart(){ sheetCart.classList.remove('show'); }
function changeQty(i,d){ cart[i].qty+=d; if(cart[i].qty<=0) cart.splice(i,1); renderCart(); updateBadge(); }
function removeItem(i){ cart.splice(i,1); renderCart(); updateBadge(); }

function renderCart(){
  const wrap=document.getElementById('cartWrap');
  if(cart.length===0){ wrap.innerHTML=`<h3>è´­ç‰©è½¦ä¸ºç©º</h3>`; return; }
  let total=0;
  const rows=cart.map((c,i)=>{ total+=c.price*c.qty; return `
    <div class='cart-row'>
      <img class='cart-thumb' src='${c.img}' alt=''>
      <div><div>${c.name}</div><div class='price'>Â¥${c.price}</div></div>
      <div style='display:flex;align-items:center;gap:8px'>
        <button class='del' onclick='removeItem(${i})'>âœ•</button>
        <div class='qty'>
          <button onclick='changeQty(${i},-1)'>âˆ’</button>
          <span>${c.qty}</span>
          <button onclick='changeQty(${i},1)'>ï¼‹</button>
        </div>
      </div>
    </div>`; }).join('');
  wrap.innerHTML = `
    <h3>è´­ç‰©è½¦</h3>${rows}
    <div class='total'><div>åˆè®¡</div><div class='price'>Â¥${total}</div></div>
    <div style='display:flex;gap:10px;margin-top:12px'>
      <button class='btn ghost' onclick='clearCart()'>æ¸…ç©º</button>
      <button class='btn' style='flex:2' onclick='goPay()'>å»ç»“ç®—</button>
    </div>`;
}

const sheetPay=document.getElementById('sheetPay'); let payMethod="wechat";
function getEnv(){ const ua=navigator.userAgent; if(ua.indexOf('MicroMessenger')>-1) return 'wechat'; if(ua.indexOf('AlipayClient')>-1) return 'alipay'; return 'browser'; }
function goPay(){ const env=getEnv(); payMethod=(env==='wechat'?'wechat':(env==='alipay'?'alipay':'wechat')); sheetCart.classList.remove('show'); renderPay(); sheetPay.classList.add('show'); }
function choose(m){ payMethod=m; renderPay(); }
function closePay(){ sheetPay.classList.remove('show'); }
function renderPay(){
  const wrap=document.getElementById('payWrap');
  const total=cart.reduce((s,i)=>s+i.price*i.qty,0);
  wrap.innerHTML = `
    <h3 style="margin:6px 0 2px">é€‰æ‹©æ”¯ä»˜æ–¹å¼</h3>
    <div class="muted">åº”ä»˜æ€»é¢ <b style="color:var(--pink)">Â¥${total}</b></div>
    <div class="pay-grid">
      <button class="pay-btn ${payMethod==='wechat'?'active':''}" onclick="choose('wechat')">å¾®ä¿¡æ”¯ä»˜</button>
      <button class="pay-btn ${payMethod==='alipay'?'active':''}" onclick="choose('alipay')">æ”¯ä»˜å®æ”¯ä»˜</button>
    </div>
    <div class="code">
      <img src="${payMethod==='wechat'?WECHAT_QR:ALIPAY_QR}" alt="æ”¶æ¬¾äºŒç»´ç ">
      <div class="muted">è¯·é•¿æŒ‰è¯†åˆ«äºŒç»´ç å®Œæˆæ”¯ä»˜ï¼ˆ${detectLabel()}ï¼‰</div>
    </div>
    <div style="display:flex;gap:10px;margin-top:12px">
      <button class="btn ghost" style="flex:1" onclick="closePay()">è¿”å›</button>
      <button class="btn" style="flex:2" onclick="finish()">å·²å®Œæˆæ”¯ä»˜</button>
    </div>`;
}
function detectLabel(){ const e=getEnv(); return e==='wechat'?'å·²è¯†åˆ«å¾®ä¿¡ç¯å¢ƒ':(e==='alipay'?'å·²è¯†åˆ«æ”¯ä»˜å®ç¯å¢ƒ':'æµè§ˆå™¨ç¯å¢ƒ'); }
function finish(){ const o=document.getElementById('successOverlay'); o.style.display='flex'; setTimeout(()=>{ o.style.display='none'; location.reload(); }, 3000); }

updateBadge();
</script>
</body>
</html>